<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>HH 커뮤니티</title>
    <script src="includeHtml.js"></script>
    <link rel="stylesheet" href="index.css"/>
    <link rel="stylesheet" href="community.css"/>
</head>
<body>
<header data-include-html="./header.html"></header>
<main>
<nav class="nav">
    <h3 class="nav-item">번호</h3>
    <h3 class="nav-item">제목</h3>
    <h3 class="nav-item1">닉네임</h3>
    <h3 class="nav-item1">작성일</h3>
</nav>

<div class="post-list" id="post-list"></div>
<div class="pagination" id="pagination"></div>

<button class="toggle-button" id="toggle-form">글쓰기</button>

<div class="post-form" id="post-form">
    <input type="text" id="nickname" placeholder="닉네임" required>
    <input type="text" id="title" placeholder="제목" required>
    <textarea id="content" placeholder="내용" required></textarea>
    <button id="submit-button">작성하기</button>
</div>

<script>
    const posts = [
        { title: '제목1', nickname: '닉네임1', date: '2024-10-01' },
        { title: '제목2', nickname: '닉네임2', date: '2024-10-02' },
        { title: '제목3', nickname: '닉네임3', date: '2024-10-03' },
        { title: '제목4', nickname: '닉네임4', date: '2024-10-04' },
        { title: '제목5', nickname: '닉네임5', date: '2024-10-05' },
        { title: '제목6', nickname: '닉네임6', date: '2024-10-06' },
        { title: '제목7', nickname: '닉네임7', date: '2024-10-07' },
        { title: '제목8', nickname: '닉네임8', date: '2024-10-08' },
        { title: '제목9', nickname: '닉네임9', date: '2024-10-09' },
        { title: '제목10', nickname: '닉네임10', date: '2024-10-10' },
    ];

    const postsPerPage = 5; // 한 페이지에 표시할 게시글 수
    let currentPage = 1;

    document.getElementById('toggle-form').addEventListener('click', function() {
        const postForm = document.getElementById('post-form');
        postForm.style.display = postForm.style.display === 'none' ? 'flex' : 'none';
    });

    document.getElementById('submit-button').addEventListener('click', function() {
        const nickname = document.getElementById('nickname').value;
        const title = document.getElementById('title').value;
        const date = new Date().toLocaleDateString(); // 현재 날짜

        if (nickname && title) {
            posts.unshift({ title, nickname, date });
            document.getElementById('nickname').value = '';
            document.getElementById('title').value = '';
            document.getElementById('content').value = '';
            updatePostList();
        } else {
            alert("모든 필드를 입력하세요.");
        }
    });

    function updatePostList() {
        const postList = document.getElementById('post-list');
        postList.innerHTML = ''; // 기존 게시글 목록 초기화
        const startIndex = (currentPage - 1) * postsPerPage;
        const endIndex = startIndex + postsPerPage;
        const paginatedPosts = posts.slice(startIndex, endIndex);

        paginatedPosts.forEach((post, index) => {
            const postItem = document.createElement('div');
            postItem.classList.add('post-item');
            postItem.innerHTML = `
                <span>${startIndex + index + 1}</span>
                <span>${post.title}</span>
                <span>${post.nickname}</span>
                <span>${post.date}</span>
            `;
            postList.appendChild(postItem);
        });

        updatePagination();
    }

    function updatePagination() {
        const pagination = document.getElementById('pagination');
        pagination.innerHTML = ''; // 기존 페이지네이션 초기화

        const totalPages = Math.ceil(posts.length / postsPerPage);

        if (currentPage > 1) {
            const prevButton = document.createElement('button');
            prevButton.innerText = '이전';
            prevButton.onclick = () => {
                currentPage--;
                updatePostList();
            };
            pagination.appendChild(prevButton);
        }

        for (let i = 1; i <= totalPages; i++) {
            const pageButton = document.createElement('button');
            pageButton.innerText = i;
            pageButton.onclick = () => {
                currentPage = i;
                updatePostList();
            };
            pagination.appendChild(pageButton);
        }

        if (currentPage < totalPages) {
            const nextButton = document.createElement('button');
            nextButton.innerText = '다음';
            nextButton.onclick = () => {
                currentPage++;
                updatePostList();
            };
            pagination.appendChild(nextButton);
        }
    }

    // 초기 게시글 목록 업데이트
    updatePostList();
</script>
</main>
</body>
</html>
